#!/bin/bash

# Regex to validate the type pattern
REGEX="^((Merge[ a-z-]* branch.*)|(Revert*)|((build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test)(\(.*\))?!?: .*))"

FILE=`cat $1` # File containing the commit message

if ! [[ $FILE =~ $REGEX ]]; then
  echo "❌ Commit message does not follow Conventional Commits format."
  echo
  echo "Expected format: type(scope): description"
  echo
  echo "Examples:"
  echo   "feat: add user authentication"
  echo   "fix(auth): resolve login timeout"
  echo   "docs: update installation guide"
  echo
  echo "Valid types: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert"

	exit 1
else
	echo >&2 "Valid commit message."
fi
